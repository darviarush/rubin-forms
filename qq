#!perl -w


BEGIN {
	use Carp 'verbose';
	$SIG{ __DIE__ } = \&Carp::confess;
	#use Devel::Confess  qw/color/;
	use Cwd qw/cwd/;
	use Data::Dumper;
}

use File::Basename qw/dirname/;
use Cwd qw/abs_path/;

chdir dirname($0);
our $framework_dir;
use lib dirname($0)."/lib";
use Msg;
use Utils;
our $ini = Utils::parse_ini("main.ini");
if($ini) {
	if(exists $ini->{"rubin"}{"path"}) { $framework_dir = abs_path($ini->{rubin}{path}); use lib "$framework_dir/lib" }
	if($ini->{"mysql"}{"DNS"}) { require Connect; }
}

@ARGV = "qq" unless @ARGV;
my $path = "bin/$ARGV[0].pl";
my $ret;
if(-e $path) { require $path; }
elsif($framework_dir && -e "$framework_dir/$path") { require "$framework_dir/$path"; }
else { die "Команда `$path` не найдена" }

1;